# クリーンアーキテクチャ

## 概要
Clean Architecture 達人に学ぶソフトウェアの構造と設計（Robert C. Martin）<br />

[![Image from Gyazo](https://i.gyazo.com/6f0b845a4d4f5c959ca6ca25b0237393.png)](https://gyazo.com/6f0b845a4d4f5c959ca6ca25b0237393)<br />

- 円の内側の要素は外部の要素に依存してはならない。
- 基本的には`entity`および、`use_case`によってビジネスルールが表現されて、システムの中で最も独立して再利用可能なコード出なければならない。

## 前提知識
### Domain Driven Design (ドメイン駆動設計)

[エリック・エヴァンスのドメイン駆動設計]()には以下のように書かれている。

> モデル駆動設計は、分析モデルと設計という二分法を捨て去り、両方の目的に使える単一のモデルを探し出す。 -- Eric Evans. エリック・エヴァンスのドメイン駆動設計 (Japanese Edition) (Kindle の位置No.1582-1583). Kindle 版.



例をとって解釈すると、、、<br />
通常、ある業務をシステムに落とし込む時、「現実の業務を適切に抽象化した分析モデルの作成」、「分析モデルを元にした設計」という2回の射影が行われる。<br />
具体的には、前者はユーザーヒアリングによる要件抽出、後者は要件を基にした仕様書作成/実装となる。しかし、多くの場合、実装上考慮せざるを得ない概念（永続化など）により、分析モデルには存在しない新たな抽象化が設計では必要になる。<br />
これにより、分析モデルと設計は徐々に乖離していき、どれだけ緻密に分析モデルを作成してもそれが設計に反映されているという保証はなくなってしまう。<br />


これらを踏まえ、エリック・エヴァンスは以下のように主張している。<br />


> 設計と、それにあいまいにしか対応していないモデルとの間の紐づけを維持することは、費用対効果が低いのだ。 (中略) 設計が、あるいは設計の中心となる部分が、ドメインモデルに紐づいていないならば、そのモデルにほとんど価値はなく、ソフトウェアが正確であるかどうかも疑わしい。同じように、モデルと設計された機能との紐づけが複雑だと理解するのが難しく、実際には、設計が変更された時に紐づけを維持できなくなる。分析と設計の間に致命的な亀裂が生じるため、それぞれの作業で得られる洞察は互いに活かされることがないのだ。 --Eric Evans. エリック・エヴァンスのドメイン駆動設計 (Japanese Edition) (Kindle の位置No.1564-1565). Kindle 版. `

そこで、分析モデルと設計を一致させることでこの問題を解決しようというアプローチがDDDである。<br />


> ソフトウェアシステムの一部を設計する際には、紐づけが明らかになるように、ドメインモデルを文字通りの意味で忠実に反映させること。モデルについて再検討し、より自然にソフトウェアに実装されるように修正すること。 (中略) 設計で使用する用語法と責務の基礎的な割り当てをモデルから引き出すこと。コードはモデルの表現となるから、コードに対する変更はモデルに対する変更になるかもしれない。その影響は、プロジェクトの他の活動全体へと適宜伝わっていかなければならない。 -- Eric Evans. エリック・エヴァンスのドメイン駆動設計 (Japanese Edition) (Kindle の位置No.1596-1598). Kindle 版. 


## 参考文献
- [Github記事](https://gist.github.com/mpppk/609d592f25cab9312654b39f1b357c60)

